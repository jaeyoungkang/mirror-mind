# 프로젝트 목록

## [x] Agentic Engineering 방법론 (1차)
- 목표: AI 에이전트 시대의 협업, 개발, 서비스 설계 방법론 수립
- 도메인: 개발, 리서치
- 완료:
  - [x] 프로젝트 구조 세팅 (collaboration / development / service-design)
  - [x] AI-인간 협업 체계 정리
  - [x] 기술적 결 — 개발 방법론 도출
  - [x] AI 서비스 설계 원칙 수립 (mirror-mind 철학 반영)
  - [x] 안전장치·지식 공급·관측 체계 원칙 추가
- 향후 과제:
  - [ ] 실제 프로젝트 적용을 통한 방법론 검증 및 개선
  - [ ] 모니터링·디버깅 시스템 구현 가이드라인 실전 적용
  - [ ] 도메인별 원칙 문서 확장 (development-principle.md, research-principle.md)

## [>] Light House — 연구 동료 에이전트 서비스
- 목표: 학술 논문 검색 + AI 분석 연구 탐색 도구. mirror-mind 철학을 서비스에 적용
- 도메인: 서비스 설계, 개발
- 저장소: `/Users/jaeyoungkang/corca/lighthouse/`
- 원칙 원본: `projects/lighthouse/service-principles.md`
- 일정:
  - 2/24(월) 17:00 — 1차 팀 공유 (설계 철학 + 시연 + 의견 수렴)
    - must-have: Phase 1~6 완료, 핵심 시연 시나리오 동작 (대화→검색→분석→아티팩트→경험 기억)
  - 2/26(목) — 후속 공유
  - 3/2(월) — 후속 공유
  - 3월 1주 — 비공개 알파 테스트 (소수 테스터 모집)
- 하위 업무:
  - [x] 1차 구현 (프로토타입)
    - [x] 문서 얼라인 — 대원칙 수립 + 하위 문서 정렬
    - [x] 관측 체계 설계 문서 작성
    - [x] 대원칙 기반 코드 재설계 (Phase A: 오케스트레이터 추출)
    - [x] 관측 UI 모듈 추가
  - [x] 서비스 방향 재검토 + 재설계
    - [x] 설계 문서 재구성 (계층 역전 해소, 중복 제거, 자체 완결)
    - [x] 대원칙 재정의 — 상위 에이전트를 대화형 연구 동료로
    - [x] SPEC.md 완전 재작성 — 대화 캔버스, 제안 카드, 아티팩트, 경험 기억, 주도권 신호
    - [x] architecture.md 재작성 — 도메인 결 3가지, 상위 에이전트 아키텍처, 대화 프로토콜, 기억 시스템, 데이터 모델
    - [x] state-management.md 재작성 — Conversation=SSOT, 서버/클라이언트 분리, 4개 Zustand 스토어, 에이전트 FSM
    - [x] design-state-alignment.md 재작성 — 새 원칙-상태 매핑, 4개 흐름 예시, 5개 실패 사례
    - [x] observability.md 부분 재작성 — 상위 에이전트 관측 계층 추가, Phase 참조 제거
    - [x] conventions.md 업데이트 — 서버사이드 코드, 대화 프로토콜 타입, 아티팩트 타입 규칙 추가
  - [x] 2차 구현 (대화형 연구 동료)
    - [x] Phase 1: 기반 구축 — 패키지, DB 스키마, Supabase 클라이언트, 도메인 타입, 디렉토리 구조
    - [x] Phase 2: 대화 코어 — 시스템 프롬프트, Chat API, Repository, 대화 캔버스, 기존 Phase 코드 정리
    - [x] Phase 3: 도구 통합 — 기존 API 로직 추출 → AI SDK 도구 6개 등록, 아티팩트 저장, 레거시 route 삭제
    - [x] Phase 4: 아티팩트 시스템 — 인라인 아티팩트 렌더러 6종, Thinking HUD, 도구 결과 영속화
    - [x] Phase 5: 제안 카드 + 자율성 — ProposalCard, propose 도구, agentStore(FSM), 주도권 신호
    - [x] Phase 6: 경험 기억 — 기억 추출/주입, 세션 간 연구 맥락 유지
    - [x] 안정화 — 버그 4건 수정(제안 카드 후 응답 중단, 해시값 표시, 도구 연쇄 호출, 마크다운 렌더링) + 기억 주입 프롬프트 개선
  - [ ] 1차 팀 공유 준비 (2/24 17:00)
  - [x] 후속 개선 1차
    - [x] 대화 톤 존대말 전환 — system-prompt.ts
    - [x] 온보딩 — corca 이름 도입, 첫 방문 판단(research_journeys 0건), 자동 대화 생성 + 인사 메시지, 첫 탐색 가이드
    - [x] 페이퍼 리스트 UI — 우측 캔버스 패널(PaperPanel/PaperList), ChatShell 래퍼, /api/papers 엔드포인트
    - [x] 주기적 중간 정리 — propose 활용, LLM 자율 판단
    - [x] propose 카드 표시 버그 수정 — 입력 필드 섹션 제거(Gemini JSON 텍스트 출력 원인), function calling 명시
    - [x] search_papers 에러 UX — throw→에러 객체 반환, ErrorCard 한국어 라벨
    - [x] "동료"→"코르카" 전환 — UI 텍스트·주석·프롬프트 전체
    - [x] Semantic Scholar 출처 표시 — ThinkingHUD, SearchPapersResult
  - [x] UI 패러다임 전환 — Living Notebook
    - [x] UI 리서치 — 8가지 방향 탐색, 5개 조합 도출
    - [x] 설계 결정 — Living Notebook + 3단 분할(Board+Graph) + 상단 내비게이션
    - [x] 노트북 코어 구현 — 채팅 버블 제거, 블록 기반 문서 렌더링, PDF-like 타이포그래피
    - [x] 레거시 코드 대규모 리팩토링
    - [x] Board + Graph 패널 — 제거 결정, 코드 삭제 완료
  - [>] 연구 시나리오 기반 고도화
    - [x] 연구자 행동 시나리오 수집 — Ellis 모델, Kuhlthau ISP, Berry Picking 등 학술 리서치
    - [x] 시나리오 문서화 — `projects/lighthouse/research-scenarios.md`
    - [x] 서비스 설계 원칙 반영 — ai-service-design-principles.md + service-principles.md에 시나리오 기반 설계 원칙 추가
    - [>] 시나리오 1(새 분야 진입) + 시나리오 2(제안서 준비) 구현
      - [x] 시스템 프롬프트 시나리오 인지 섹션 반영 (system-prompt.ts)
      - [x] 대화 플로우 시나리오 연동 — snowballing 도구, 연쇄 규칙 분기, 메모리 규칙 연동, year 필터, 클러스터 기준 유연화
      - [x] ~~3컬럼 레이아웃~~ → 폐기, 2컬럼 + 문서 기반 패널로 전환 (세션 15 결정)
      - [x] ~~논문 패널 고도화 (고정 컴포넌트)~~ → 폐기, LLM 동적 문서 생성으로 대체 (세션 15 결정)
      - [x] UI 패러다임 전환 — 2컬럼(사이드바|노트북|연구문서패널) + LLM 동적 문서 생성 + update_research_panel 도구 + 아티팩트 영속화
      - [x] 논문 리스트 구조화 — ```papers 코드블록 + PaperListBlock 커스텀 렌더러 + 링크·reason 표시
      - [x] 기존 경험 호환성 검증 + 안정화 — 기존 대화 폴백, PanelAction 방어, snowball 대안 경로, 에러 방어
      - [>] 응답 속도 개선 — 검색+결과표시 병목 해소 (2/26 공유 전 최우선)
        - [x] 관측 가능한 구조 리팩토링 — route.ts 214줄→20줄, orchestrator.ts 5페이즈 추출, TurnContext 트리 관측 모델
        - [x] 도구 수준 LLM 추상화 — llm-judgment.ts executeJudgment 공통 경로, 6개 도구 리팩토링
        - [ ] 관측 지점 추가 — orchestrator 페이즈에서 실제 메타데이터 기록
        - [ ] dev 페이지 타임라인 뷰 구현
        - [ ] 관측 데이터 기반 속도 분석 및 개선
      - [ ] 시나리오 1,2 실제 시연 검증
    - [ ] 시나리오 3~5 점진적 확장
  - [>] 기억 시스템 2레이어 적용 — mirror-mind 기억 철학을 lighthouse에 적용
    - [x] 갭 분석 — 현행 에피소드 1레이어 vs 2레이어(사실+기억) 비교
    - [x] 구현 프롬프트 작성 — agent_memories 테이블, 4 kind, 추출-저장-주입 파이프라인 설계
    - [ ] 구현 — 구현 에이전트에 위임 (프롬프트: `.claude/plans/eager-jingling-popcorn.md`)
  - [ ] 관계 형성 고도화 — 상호 맥락 파악, 경험 기반 점진적 설명, 관계 깊이별 행동 변화
  - [ ] 안정화

## [>] 기억 시스템 — 네트워크 구조로 전환
- 목표: 세션 간 기억 유지. 노드+링크 네트워크 구조로 spreading activation 기반 기억 활성화
- 도메인: 운영
- 하위 업무:
  - [x] 에피소드 스키마 설계 (Light House 적응)
  - [x] query.py 구현 (필터 기반 조회)
  - [x] extract_text.py 구현 (raw JSONL → 텍스트 추출)
  - [x] 15개 세션 백필 (56개 에피소드)
  - [x] AGENTS.md 통합 (세션 시작·종료 절차)
  - [x] 기억 철학 재정의 — 기억의 주체는 에이전트 자신
  - [x] memories.json 1차 작성 — 5개 kind, 35개 기억
  - [x] decisions.md 폐기 — episodes.json + memories.json이 역할 흡수
  - [x] 세션 종료 자동화 — close-session.py
  - [x] 세션 노트 MD 폐기
  - [x] 네트워크 구조 시뮬레이션 v1 — 삭제 완료 (v2에서 완전 재설계)
    - 교훈: 75개 노드 과소 → 1-hop 문제, temporal cross-session 독성, 텍스트 매칭 평가 무의미
  - [x] 네트워크 시뮬레이션 v2 — 교훈 반영
    - 노드세트 3종(proposition 218, semantic-unit 220, entity-event 177)
    - 링크: k-NN(의미) + co-occurrence(맥락), 별도 구축 후 fusion
    - gate 통과: knn k3/k5 (1-hop 2-3%, avg_path 3.3-5.2)
    - 대화 평가: fusion-weighted/proposition__k3 = 17.3/20 1위
  - [>] **v3: 자연스러운 기억 설계** — 검색 최적화가 아닌 대화 자연스러움 최적화
    - 핵심 원칙:
      - 노드 타입은 **fact + intention** 두 가지뿐
      - 감정·해석·연상은 노드가 아니라 사실+의도가 함께 활성화되면 **발현**되는 것
      - 발현된 것 중 의미 있는 것은 새로운 fact 노드로 저장 (기억의 축적)
      - 원재료는 raw JSONL에서 직접 추출 (중간산물 우회 금지)
      - 규모 대응: 분할 처리 + 서브에이전트 병렬
    - [x] 파일럿 — 세션19 raw → 71개 노드 추출 (fact 66, intention 5)
      - 결과: `memory/simulation/v3/pilot_session19.json`
    - [ ] 전체 세션 추출 — 20개 raw JSONL → 서브에이전트 병렬 투입
    - [ ] 네트워크 구축 — v2의 knn+cooccurrence fusion 구조 재활용
    - [ ] 평가 방법 전환 — 점수표 → sub-agent 실제 대화 + 자연스러움 판단
  - [ ] 최종 구조 확정 → 실제 시스템에 적용
  - [ ] 아카이브 정책 — scope lifecycle 운영

## [>] 메타에이전트 — 원칙 준수 감시
- 목표: 대화 중 mirror-mind-principle.md, task-management-principle.md 등의 원칙이 지켜지고 있는지 상시 점검
- 도메인: 운영
- 하위 업무:
  - [x] 프로토타입 구현 (세션 중 JSONL 실시간 읽기 + 원칙 위반 감지)
  - [x] 세션 시작 절차에 통합 (AGENTS.md, 5분 간격)
  - [x] codex exec 기반 LLM 점검 추가 (순응/목적/선제성/역할 경계, --llm 플래그)
  - [ ] memory_policy 점검 규칙을 새 기억 시스템(memories.json)에 맞게 업데이트
  - [ ] 실전 운영 후 점검 항목 개선

## [ ] 기억 주입 자동화 — 네트워크 기반 기억 활성화 + 프롬프트 주입
- 목표: 대화 맥락에서 spreading activation으로 관련 기억을 활성화하여 프롬프트에 자동 주입
- 도메인: 운영
- 배경: 네트워크 시뮬레이션 v2까지 완료. v3에서 자연스러움 최적화 후 실제 시스템에 적용
- 하위 업무:
  - [ ] v3 기억 구조 확정 후 activate.py 구현 — 입력 맥락 → spreading activation → 활성화 노드 반환
  - [ ] AGENTS.md 절차 통합 — 세션 시작/주제 전환/작업 종료 절차에 기억 활성화 호출 추가
  - [ ] 주입 품질 검증 — 실제 대화에서 기억이 자연스럽게 녹아드는지 확인
