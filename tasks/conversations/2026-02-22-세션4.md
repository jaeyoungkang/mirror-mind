# 2026-02-22 세션 4: Light House 구현 조율 + 관측 체계 설계 + 운영 개선

- 세션 ID: `4956498b-43de-4ae6-94d8-1c89ceac476a`
- 원시 데이터 (경량): `tasks/conversations/raw/2026-02-22-세션4.jsonl`

## 목차
1. [세션3 기록 복구](#세션3-기록-복구)
2. [Light House 구현 에이전트 지시](#light-house-구현-에이전트-지시)
3. [운영 개선 — 주제 전환 + 트리거 지시문](#운영-개선)
4. [관측 체계 설계](#관측-체계-설계)
5. [Phase A 결과 검토 + Phase B·C 판단](#phase-abc-판단)

---

## 세션3 기록 복구
> 시간: 18:43 ~ 18:49

세션3 종료 시 git 인증 문제로 누락된 대화 기록을 복구.
- JSONL 원본(3aa734a3)에서 raw 데이터 export
- 대화 노트(세션3.md) 작성
- decisions.md의 세션3 항목에 `> 원본:` 참조 보정

---

## Light House 구현 에이전트 지시
> 시간: 18:49 ~ 19:15

lighthouse 구현 에이전트에 대원칙 기반 코드 재설계를 지시하기 위한 준비.

- lighthouse 저장소의 미커밋 docs 변경(세션3 작업분)을 커밋
- 대원칙 문서(service-principles.md)를 lighthouse docs/에 복사 — 에이전트가 자연스럽게 읽을 수 있도록
- AGENT.md에 대원칙 링크 추가
- 구현 에이전트 지시문 작성 (감사 → 계획 → 단계별 진행)
- 감사 결과 검토: 갭 5개 진단은 정확. Phase B·C에 과잉 추상화·시기상조 우려 제기
- 최종 지시: Phase A만 진행, B·C는 A 완료 후 재판단

---

## 운영 개선
> 시간: 19:15 ~ 19:25

### 주제 전환 체크포인트 원칙
세션 중 주제 전환 시 맥락이 휘발되는 문제 해결.
- task-management-principle.md에 "주제 전환" 섹션 추가
- 결정 전은 projects.md, 결정 후는 decisions.md에 기록

### 트리거 지시문 목록
명시적 트리거로 AI 행동을 유발하는 지시문 6개를 AGENTS.md에 추가.
- 작업 시작, 작업 종료, 주제 전환/킵, 정합성 검증, 회고, 원칙 점검

### 메타에이전트 참조 오류 수정
트리거 테이블에서 `decisions.md`를 `tasks/decisions.md`로 경로 보정.

---

## 관측 체계 설계
> 시간: 19:25 ~ 19:38

lighthouse 관측 체계 설계 문서(docs/observability.md) 작성.

- 범위: 프로토타입 최소 관측 (비즈니스 로직 정상 동작 확인 목적)
- 5개 관측 대상: AI 호출, API 라우트, 오케스트레이션, 워크플로, 비즈니스 로직
- 구현: app/lib/observe.ts 단일 파일, 구조화된 JSON console.log
- 호출 빈도 모니터링 추가 (무한 루프/중복 트리거 감지)
- 과다 호출 방지(안전장치)는 관측이 아닌 Agent Plane 영역 — 별도 설계
- lighthouse docs에서 mirror-mind 참조 3건 제거 (로컬 참조로 교체)

Phase A 완료 후 orchestrator.ts 반영하여 §3 오케스트레이션 섹션 추가.

---

## Phase A·B·C 판단
> 시간: 19:38 ~ 19:45

- Phase A (오케스트레이터 추출): 완료. orchestrator.ts 신설, page.tsx 정리
- Phase B (에이전트 인터페이스): 보류 유지. 교체 가능한 에이전트가 필요해지면 도입
- Phase C (연구 의도 모델): 프롬프트 실험으로 사전 검증 후 판단. projects.md에 업무 등록
