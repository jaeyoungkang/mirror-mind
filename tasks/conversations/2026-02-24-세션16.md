# 세션 16 — 에피소드 기반 기억 시스템 구축

> 2026-02-24 | 소요: ~2시간

## 주제
Light House 메모리 시스템을 mirror-mind에 적응·구현

## 진행 요약

### 1. 기억 시스템 필요성 논의
- 현재 mirror-mind는 decisions.md(558줄)를 세션 시작 시 훑는 수준 → 사실상 과거 기억 참조 불가
- 사용자가 기억 시스템을 직접 경험하고 싶다는 동기
- 프로그램적 조회·검증이 부족하다는 문제 인식

### 2. Light House 메모리 시스템 탐색
- `/Users/jaeyoungkang/corca/lighthouse/` 에피소드 기반 시스템 분석
- Supabase DB 기반 → mirror-mind에서는 JSON 파일 + git으로 적응

### 3. 설계 및 구현
- **에피소드 스키마**: activity_type, project, topic, summary, emotion, outcome, relationship_type, milestone_key, scope 등
- **query.py**: 다양한 필터(--project, --emotion, --keyword, --milestone, --recent, --stats 등)
- **extract_text.py**: raw JSONL에서 읽을 수 있는 텍스트 추출

### 4. 15개 세션 백필
- 처음 대화 노트(md) 기반으로 33개 에피소드 추출 → 사용자 피드백: "raw JSONL을 읽어서 처리하길 기대했다"
- 서브에이전트 3개 병렬 투입 (세션 1-5, 6-10, 11-15) → raw JSONL 기반 56개 에피소드 추출
- 3개 배치 파일 병합 → episodes.json 완성

### 5. AGENTS.md 통합
- 세션 시작 절차에 기억 조회 단계 추가 (step 5)
- 작업 종료 절차에 에피소드 추가 단계 포함
- 기억 시스템 섹션 신설

## 결정 사항
- 에피소드 추출은 AI가 직접 수행 (API 기반 스크립트 대신)
- 대화 중 query.py를 수시로 활용하여 기억 조회
- 백필은 1회성, 이후 세션별로 추가

## 산출물
- `memory/episodes.json` (56개 에피소드)
- `memory/scripts/query.py`
- `memory/scripts/extract_text.py`
- `AGENTS.md` 업데이트

## 사용자 피드백
- md 요약이 아닌 raw JSONL 기반 추출을 기대함 → 반영
- 서브에이전트 병렬 처리 제안 → 채택
- "수시로 기억을 조회하고 주입하면 좋겠다" → AGENTS.md에 반영
