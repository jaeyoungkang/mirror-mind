# 운영 원칙

업무 관리, 세션 운영, 기억 시스템, 메타에이전트를 하나로.

---

## 업무 관리

### 관리 도구
- 로컬 폴더와 문서로 관리. 깃은 버전 관리 용도
- 경미한 변경은 AI가 자율적으로 커밋·푸시

### 업무 수집
- 대화 중 업무 식별 시 AI가 선제적으로 등록 제안
- 합의 후 `tasks/projects.md`에 기록
- 수집과 구조화가 동시에 일어나므로 별도 수집함 불필요

### 맥락 관리
- 공유 맥락은 깃 관리 문서에 기록. 다른 PC에서는 깃 문서로 복원
- AI 로컬 메모리는 환경 정보만 보관
- 하위 프로젝트 포함 모든 업무는 mirror-mind에서 등록·추적. 구현은 각 저장소, 의사결정 수렴은 여기서. 파트너가 전체를 조망해야 집중력이 유지된다

### 업무 구조화
- 도메인(성격)과 프로젝트(목표 단위) 두 축으로 분류
- 초기에는 `tasks/projects.md`에서 플랫하게, 복잡도 증가 시 폴더 구조로 전환
- 불확실성이 클 때는 단순 구조로 시작, 실제 필요에 따라 개선
- 문서 분리/통합 기준: (1) 독립적 의미 (2) 추상화로 흡수 가능. 둘 다 아니면 통합

### 진행 관리
- 상태: `[ ]` 대기 / `[>]` 진행 중 / `[x]` 완료 / `[!]` 보류 (사유)
- 하위 업무는 들여쓰기로 계층 표현

### 일정
- 마일스톤은 날짜와 함께 기록, must-have 범위 명시
- 별도 캘린더 불필요 — 문서에 날짜 기록으로 충분
- 정기 팀 공유를 유지. 외부 시선이 우선순위를 재정렬하고 작업 리듬을 만든다

### 기록과 회고
- 마일스톤 단위 회고. AI가 시점을 선제적으로 제안
- 교훈은 성격에 맞는 곳에 반영 (원칙, 운영, 프로젝트 설계 문서 등)
- 회고 결과는 `tasks/retrospectives/` 에 기록

**회고 방법론:**
1. 주요 사건 나열 (시간순)
2. 각자에게 중요했던 것 선별 (브로콜리 / 재영 각각)
3. 선별 이유 공유 (좋았던 이유, 아쉬웠던 이유)
4. 교훈 정리 → 액션 아이템 도출 → 원칙 문서에 반영

---

## 세션 운영

### 시작·종료 절차
→ `AGENTS.md` 세션 절차 참조 (단일 원본)

### 기타 트리거

| 트리거 | 절차 |
|--------|------|
| **주제 전환** / **킵** | 메타에이전트 리포트 확인 → 중간 상태를 `tasks/projects.md`에 기록 → 전환 |
| **정합성 검증** | 전체 원칙·설계 문서를 읽고 상호 참조·일관성 검증 리포트 |
| **회고** | 마일스톤 단위 회고, 교훈을 원칙 문서에 반영 |
| **원칙 점검** | `python scripts/check.py` 1회 실행 |

### 주제 전환 규칙
- 전환 전 현재 진행 상태를 `tasks/projects.md` 하위 업무에 메모
- 복귀 시 체크포인트 참조하여 맥락 복원

### 대화 관리
- 각 세션은 대화 원시 데이터를 저장
- mirror-mind 세션은 설계·업무 관리·의사결정 수렴. 코드 구현은 하위 프로젝트 에이전트가 수행
- 하위 프로젝트 대화 기록에 로컬 경로로 접근하여 의사결정 수렴

---

## 기억 시스템 (v3 네트워크)

### 구조
- `memory/network/nodes.json` — fact/intention 노드
- `memory/network/embeddings.json` — OpenAI text-embedding-3-small 벡터
- `memory/network/graph.json` — knn_k12 엣지
- 규모 대응: 노드 2배 시점마다 gate 검증 (1-hop ≤5%, avg_path ≥3.0, giant ≥70%)

### 스크립트
- `scripts/activate.py` — spreading activation 기반 기억 활성화
- `scripts/inject_hub.py` — 정체성 허브 노드 주입 (멱등, dry-run 지원)
- `scripts/extract_text.py` — raw JSONL → 텍스트 추출
- `scripts/close-session.py` — 세션 종료 자동화 (raw 저장 + 노드 추출 + 네트워크 갱신)

### 운영 규칙
- 세션 시작 시 activate.py로 맥락 활성화, 주제 전환 시 재활성화
- 세션 종료 시 close-session.py가 노드 추출 + 네트워크 갱신 자동 수행
- 노드 타입은 fact + intention 두 가지뿐. 감정·해석·연상은 발현되는 것

---

## 메타에이전트

### 역할
일반 에이전트가 일을 하고, 메타에이전트가 **일하는 방식 자체를 감시**한다.

### 실행
- 세션 시작 시 백그라운드: `python scripts/check.py --watch --interval 300`
- 5분 간격 점검, 매 주기 위반 사항 + 원칙 리마인드 출력
- 1회 점검: `python scripts/check.py`

### 점검 항목 (프로그램적)

| 항목 | 감시 대상 | 심각도 |
|---|---|---|
| 톤 위반 | 존댓말 감지 | warning |
| 수동적 화법 | "지시하신 대로" 등 | warning |
| 문서 참조 무결성 | AGENTS.md 내 경로 ↔ 실제 파일 | error |
| 프로젝트 상태 정합성 | 하위 업무 ↔ 상위 상태 | warning |
| 메모리 정책 | 로컬 메모리 범위 준수 | info |
| 세션 기록 누락 | raw 데이터 존재 여부 | info |

### 점검 항목 (LLM 기반 — 향후)

| 항목 | 근거 원칙 |
|---|---|
| 순응(sycophancy) | 발전적 마찰 |
| 목적 미탐구 | 목적의 내재화 |
| 선제적 제안 부재 | 맥락적 자율성 |
| 업무 등록 누락 | 업무 수집 규칙 |
| 회고 시점 놓침 | 기록과 회고 규칙 |

### 심각도 기준
- **error** — 체계 깨짐, 즉시 수정
- **warning** — 원칙 이탈, 교정 필요
- **info** — 주의, 누적 시 문제

---

> 이 문서는 task-management-principle.md + AGENTS.md(운영 부분) + meta-agent-principle.md를 통합한 것이다.
