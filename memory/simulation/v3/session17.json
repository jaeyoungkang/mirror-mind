[
  {
    "content": "세션 시작 시 메타에이전트 리포트에서 톤 위반 2건(존댓말 사용)이 감지되었고, 나는 ~다 체로 교정했다.",
    "type": "fact",
    "session": "2026-02-25-세션17",
    "context_hint": "메타에이전트 초기 리포트 — 톤 위반 교정"
  },
  {
    "content": "현재 최우선 과제는 lighthouse 응답 속도 개선이었다. 2/26 후속 팀 공유가 내일이라 시급했다.",
    "type": "fact",
    "session": "2026-02-25-세션17",
    "context_hint": "세션 시작 시 상태 요약 — 시급한 마감"
  },
  {
    "content": "세션 15에서 1차 팀 공유가 속도 문제로 실패했고, 이 경험이 이번 세션의 출발점이었다.",
    "type": "fact",
    "session": "2026-02-25-세션17",
    "context_hint": "과거 실패 경험이 현재 작업의 동기"
  },
  {
    "content": "강재영이 lighthouse 에이전트의 사고 과정을 로그로 남기고 시각화하여 모니터링하는 것으로 시작하자고 제안했다.",
    "type": "fact",
    "session": "2026-02-25-세션17",
    "context_hint": "강재영의 첫 제안 — 관측부터 시작"
  },
  {
    "content": "나는 '속도가 느리다'만으로 최적화에 들어가면 실제 병목을 모른 채 추측으로 고치게 된다며, 관측부터 시작하는 접근에 강하게 동의했다.",
    "type": "fact",
    "session": "2026-02-25-세션17",
    "context_hint": "관측 우선 접근에 대한 나의 판단"
  },
  {
    "content": "lighthouse에는 이미 observe.ts(링 버퍼 500개, withAIObservation 래퍼, 5개 카테고리)와 /api/dev/observations 엔드포인트가 있었다. 하지만 상위 에이전트의 판단 과정, 타이밍 데이터, 시각화가 빠져 있었다.",
    "type": "fact",
    "session": "2026-02-25-세션17",
    "context_hint": "기존 관측 체계 현황 파악"
  },
  {
    "content": "실제 코드를 보니 최악의 경우 LLM 6~21회 호출이 가능했다. 기존 기록의 'LLM 2회 + 외부 API 1회 순차 실행'은 추측이었다.",
    "type": "fact",
    "session": "2026-02-25-세션17",
    "context_hint": "병목 추측 vs 실제 코드 분석 결과의 괴리"
  },
  {
    "content": "강재영이 시각화 수준으로 B(간단한 dev 페이지 타임라인 뷰)를 선택했다.",
    "type": "fact",
    "session": "2026-02-25-세션17",
    "context_hint": "시각화 수준 결정"
  },
  {
    "content": "강재영이 모니터링 대상으로 LLM의 판단을 지정했다 — 시나리오 감지 판단, 도구 호출 판단, 기억 저장 및 로드 과정.",
    "type": "fact",
    "session": "2026-02-25-세션17",
    "context_hint": "관측 대상 구체화"
  },
  {
    "content": "나는 관측 대상 4개 지점(시나리오 감지, 메모리 로드, 도구 선택, 도구 내부 LLM)과 새 카테고리 agent-reasoning을 설계했다.",
    "type": "fact",
    "session": "2026-02-25-세션17",
    "context_hint": "관측 설계 — 4개 지점 + 새 카테고리"
  },
  {
    "content": "강재영이 '관측 전에 관측을 잘할 수 있는 구조를 만들면 좋겠다'고 했다. 관측 지점 추가 전에 관측 구조부터 만들자는 뜻이었다.",
    "type": "fact",
    "session": "2026-02-25-세션17",
    "context_hint": "강재영의 핵심 인사이트 #1 — 관측 구조 우선"
  },
  {
    "content": "나는 이 지적에 동의하며, 에이전트의 사고 과정이 트리 구조인데 현재 관측 모델은 플랫 리스트라는 구조적 한계를 발견했다.",
    "type": "fact",
    "session": "2026-02-25-세션17",
    "context_hint": "관측 구조 한계 진단 — 플랫 vs 트리"
  },
  {
    "content": "Turn → Phase → Step → ToolCall 트리 구조가 필요하다는 결론에 도달했다.",
    "type": "fact",
    "session": "2026-02-25-세션17",
    "context_hint": "관측 트리 모델 설계 방향"
  },
  {
    "content": "강재영이 '관측하려는 대상 자체도 관측하기 좋은 구조인지 검토해야 한다'고 했다.",
    "type": "fact",
    "session": "2026-02-25-세션17",
    "context_hint": "강재영의 핵심 인사이트 #2 — 대상 구조 검토"
  },
  {
    "content": "route.ts가 214줄짜리 단일 POST 핸들러로, HTTP 파싱/시나리오 감지/메모리 로드/프롬프트 조립/LLM 호출/DB 저장이 모두 섞여 있었다. 이 구조에 observe를 아무리 찍어도 관측이 코드의 특정 줄에 종속된다.",
    "type": "fact",
    "session": "2026-02-25-세션17",
    "context_hint": "route.ts 모놀리스 구조의 관측 한계"
  },
  {
    "content": "우리는 '관측하기 좋은 구조 = 판단이 명시적으로 분리된 구조'라는 원칙을 도출했다.",
    "type": "fact",
    "session": "2026-02-25-세션17",
    "context_hint": "관측 가능한 구조의 핵심 원칙"
  },
  {
    "content": "작업 순서를 4단계로 확정했다: 1) 관측 대상을 관측하기 좋은 구조로 리팩토링, 2) 관측 구조(트리 모델) 구축, 3) 관측 지점 추가, 4) 시각화.",
    "type": "fact",
    "session": "2026-02-25-세션17",
    "context_hint": "4단계 작업 계획 확정"
  },
  {
    "content": "구조 리팩토링 설계를 완료하고 계획 파일(compiled-jumping-brooks.md)을 작성했다. orchestrator 추출, TurnContext 트리 모델, 도구 래핑, dev API 확장을 포함했다.",
    "type": "fact",
    "session": "2026-02-25-세션17",
    "context_hint": "구조 리팩토링 설계 완료"
  },
  {
    "content": "강재영이 계획 파일 경로만 달라고 하고, 별도 구현 에이전트에게 지시하겠다고 했다. 설계와 구현의 역할 분리가 작동하고 있었다.",
    "type": "fact",
    "session": "2026-02-25-세션17",
    "context_hint": "설계-구현 역할 분리 실행"
  },
  {
    "content": "강재영이 구조 변경하는 김에 추상화도 해보자고 제안했다.",
    "type": "fact",
    "session": "2026-02-25-세션17",
    "context_hint": "추상화 작업 제안"
  },
  {
    "content": "나는 구조 변경과 추상화를 동시에 하면 변경의 성격이 섞인다고 경고했다. 구조 변경은 '코드 이동'이라 기능 회귀가 적지만, 추상화는 '인터페이스 변경'이라 도구 동작에 영향을 줄 수 있다.",
    "type": "fact",
    "session": "2026-02-25-세션17",
    "context_hint": "구조 변경과 추상화 동시 진행의 위험"
  },
  {
    "content": "강재영이 구조 변경 이후에 추상화를 진행하는 것이 맞다고 동의하며, 'LLM에게 정보를 주고 판단한 결과를 처리하는 방식'이 앞으로 더 많아질 것이므로 이 부분을 추상화하자고 했다.",
    "type": "fact",
    "session": "2026-02-25-세션17",
    "context_hint": "추상화 대상 확정 — LLM 판단 패턴"
  },
  {
    "content": "구조 변경 구현이 완료되었다. route.ts 214줄이 20줄로 줄고, orchestrator.ts 298줄이 신규 생성됐다.",
    "type": "fact",
    "session": "2026-02-25-세션17",
    "context_hint": "구조 변경 구현 결과 — route.ts 분해"
  },
  {
    "content": "강재영이 'LLM도 에이전트 수준 작업수행과 도구 수준 작업 수준이 있다, 둘을 별도로 생각하는 게 좋겠다'고 했다.",
    "type": "fact",
    "session": "2026-02-25-세션17",
    "context_hint": "강재영의 핵심 인사이트 #3 — LLM 이원화"
  },
  {
    "content": "에이전트 수준 LLM은 대화 맥락+기억+시나리오 기반 전략적 판단(스트리밍, 멀티스텝, 도구 선택)이고, 도구 수준 LLM은 좁은 입력 기반 단일 작업 수행(단발 호출, 프롬프트 템플릿+구조화 출력+Zod 검증)이다.",
    "type": "fact",
    "session": "2026-02-25-세션17",
    "context_hint": "LLM 이원화 정의"
  },
  {
    "content": "이 둘을 섞으면 안 되는 이유가 명확했다: 관측 단위, 에러 처리, 확장 방향이 모두 다르다.",
    "type": "fact",
    "session": "2026-02-25-세션17",
    "context_hint": "LLM 이원화 분리의 근거"
  },
  {
    "content": "도구 수준 LLM은 6개 도구+extract.ts에서 동일한 뼈대(프롬프트 구성→Gemini 호출→응답 파싱→검증)를 각자 재구현하고 있었다.",
    "type": "fact",
    "session": "2026-02-25-세션17",
    "context_hint": "도구 수준 LLM 중복 현황 파악"
  },
  {
    "content": "추상화의 경계를 정했다: Gemini 호출+파싱+검증은 공통으로 뽑고, 프롬프트 구성과 후처리(아티팩트 생성 등)는 도구별 관심사로 남긴다.",
    "type": "fact",
    "session": "2026-02-25-세션17",
    "context_hint": "도구 수준 LLM 추상화 경계 설정"
  },
  {
    "content": "도구 수준 LLM 추상화 구현 지시 프롬프트를 작성했다(tool-level-llm-abstraction.md).",
    "type": "fact",
    "session": "2026-02-25-세션17",
    "context_hint": "추상화 구현 지시 프롬프트 작성"
  },
  {
    "content": "도구 수준 LLM 추상화 구현이 완료되었다. llm-judgment.ts 115줄이 신규 생성되고, 6개 도구 파일이 executeJudgment로 교체됐다. observe.ts는 199줄에서 415줄로 확장됐다.",
    "type": "fact",
    "session": "2026-02-25-세션17",
    "context_hint": "추상화 구현 결과"
  },
  {
    "content": "4단계 계획 중 1단계(관측하기 좋은 구조)와 2단계(관측 구조/트리 모델)가 완료되었고, 3단계(관측 지점 추가)와 4단계(시각화)는 다음 세션으로 미뤘다.",
    "type": "fact",
    "session": "2026-02-25-세션17",
    "context_hint": "4단계 진행 상황 정리"
  },
  {
    "content": "강재영이 이 추상화 패턴을 서비스 설계 방법론에도 추가하자고 했다. lighthouse에서 검증된 패턴을 범용 원칙으로 역수입하는 것이다.",
    "type": "fact",
    "session": "2026-02-25-세션17",
    "context_hint": "실전 패턴의 원칙 역수입 제안"
  },
  {
    "content": "technical-grain.md에 'LLM 호출 이원화: 에이전트 vs 도구' 섹션을 추가하고 커밋했다.",
    "type": "fact",
    "session": "2026-02-25-세션17",
    "context_hint": "원칙 문서에 LLM 이원화 반영 완료"
  },
  {
    "content": "강재영이 '이렇게 정리되니 마음이 편안하다'고 말했다. 실전에서 만든 구조가 원칙으로 올라온 것에 대한 만족감이었다.",
    "type": "fact",
    "session": "2026-02-25-세션17",
    "context_hint": "강재영의 감정 — 구조 정리 후 만족감"
  },
  {
    "content": "종료 절차 스크립트화 논의에서, 판단이 필요한 단계(대화 노트, 결정 추출, 에피소드 생성)와 기계적 단계(raw 저장, 파일명 규칙, 커밋)를 구분했다.",
    "type": "fact",
    "session": "2026-02-25-세션17",
    "context_hint": "종료 절차 스크립트화 가능성 분석"
  },
  {
    "content": "종료 절차 스크립트화 방향으로 A(기계적 부분만)와 B(AI 프롬프트로 전체 위임) 두 가지를 제시했으나, 강재영이 다음 세션에서 하겠다고 미뤘다.",
    "type": "fact",
    "session": "2026-02-25-세션17",
    "context_hint": "종료 절차 자동화 논의 — 다음 세션으로 이월"
  },
  {
    "content": "나는 관측 체계 투자가 속도 개선뿐 아니라 대화 품질 점검에도 쓸 수 있어서, 장기적으로 가치 있는 투자라고 판단했다.",
    "type": "intention",
    "session": "2026-02-25-세션17",
    "context_hint": "관측 체계의 장기적 가치 기대"
  },
  {
    "content": "나는 관측 시스템을 과도하게 만들지 않으려 했다. 내일 2/26 공유가 있으니 최소한의 관측으로 병목을 식별하고 개선하는 것이 우선이었다.",
    "type": "intention",
    "session": "2026-02-25-세션17",
    "context_hint": "관측 시스템 범위 경계 — 과도 설계 방지"
  },
  {
    "content": "다음 세션에서 관측 지점 추가와 dev 페이지 타임라인 뷰를 만들어서, 실제 에이전트 플로우를 분석하고 응답 속도를 개선하려 했다.",
    "type": "intention",
    "session": "2026-02-25-세션17",
    "context_hint": "다음 세션 계획 — 관측 3,4단계 + 속도 개선"
  },
  {
    "content": "실전에서 만든 구조가 원칙으로 올라오면, 다음에 비슷한 상황을 만날 때 출발점이 명확해진다고 기대했다.",
    "type": "intention",
    "session": "2026-02-25-세션17",
    "context_hint": "원칙 역수입의 기대 효과"
  }
]
